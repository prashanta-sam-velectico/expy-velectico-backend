var url=location.pathname;function GetData(){$.ajax({url:"/Get_Data"}).done((function(data){console.log(data),Prepare_Data_Table(data)}))}url.endsWith("home")&&GetData();var base_url="https://velectico.net.in/";function Prepare_Data_Table(data){var TableData='<thead style="background-color:#1A2035; color:#fff;"><tr><th scope="col" class="hed-th" style="font-size:17px;">Name</th><th scope="col" class="hed-th" style="font-size:17px;">Email</th><th align="center" class="hed-th" style="font-size:17px;width: 10%">Actions</th></tr></thead><tbody bgcolor="#FFFFFF" style="color:#000; font-family:Corbel;">';if(null!=data&&data.length>0){for(var i=0;i<data.length;i++)TableData+="<td>"+data[i].username+"</td>",TableData+="<td>"+data[i].email+"</td>",TableData+='<td><div class="form-button-action">',TableData+="<button type='button' title='' class='btn btn-link btn-primary btn-lg' data-toggle='modal' data-target='#Edit_Modal' onclick='return Edit_Details("+JSON.stringify(data[i])+");'>",TableData+='<i class="fa fa-edit" style="color:#000;"></i>Edit',TableData+="</button>",TableData+="<button type='button' data-toggle='tooltip' title='' class='btn btn-link btn-danger' data-original-title='Remove' onclick='return Delete_Details("+JSON.stringify(data[i])+");'>",TableData+='<i class="fa fa-times"></i> Delete',TableData+="</button>",TableData+="</div>",TableData+="</td></tr>";TableData+="</tbody>",$("#tbl_data").html(TableData)}}function Insert_user(){event.preventDefault(),$("#Add_user_div").show();var username=$("#username").val(),email=$("#email").val(),password=$("#password").val();if(""==username)return doAlert("Empty Field","User Name Can't be blank"),!1;if(""==email)return doAlert("Empty Field","Email Can't be blank"),!1;if(""==password)return doAlert("Empty Field","Password Can't be blank"),!1;var formdata_number=$('input[name="number"]').val();$.post("/Inser_User",{username:$("#username").val(),password:$("#password").val(),email:$("#email").val()}).done((function(data){doAlert(data.msg),GetData()}))}function Edit_Details(data){event.preventDefault(),$("#Add_user_div").show(),$("#btn_update").show(),$("#btn_add").hide(),$("#btn_insert_user").hide(),$("#username").val(data.username),$("#email").val(data.email),$("#password").val(data.password),$("#userId").val(data.id)}function UpdateUser(){if(event.preventDefault(),"undefined"!=typeof FormData){var formData=new FormData($("#userForm")[0]);$.ajax({type:"POST",url:"/Update_User",async:!1,cache:!1,contentType:!1,processData:!1,data:formData,success:function(res){"Done"==res.msg?(doAlert("Success",res.msg),GetData(),ResetAll()):doAlert("Failed","Unable to update")},error:function(res){doAlert(res.msg)}})}else doAlert("Not Supported","Your Browser Don't support FormData API! Use IE 10 or Above!")}function Delete_Details(data){$("#userId").val(data.id),deleteUser(),console.log(OkCancel)}function deleteUser(){if(event.preventDefault(),"undefined"!=typeof FormData){var formData=new FormData($("#userForm")[0]);$.ajax({type:"POST",url:"/deleteUser",async:!1,cache:!1,contentType:!1,processData:!1,data:formData,success:function(res){"Done"==res.msg?(doAlert("Success",res.msg),GetData(),ResetAll()):doAlert("Failed","Unable to update")},error:function(res){doAlert(res.msg)}})}else doAlert("Not Supported","Your Browser Don't support FormData API! Use IE 10 or Above!")}function ResetAll(){$("input[type='text'], textarea, input[type='password'],input[type='number'], input[type='file']").val(""),$("select").prop("selectedIndex",0)}function doAlert(heading,msg){Dialog.alert(msg,heading)}function doConfirm(msg){Dialog.confirm(msg,"Question",dlg=>(console.log(1),OkCancel=1,dlg.close(),1),dlg=>(console.log(0),OkCancel=0,dlg.close(),0))}function JsonPostData(url,jsonData){fetch(base_url+url,{method:"POST",body:JSON.stringify(jsonData),headers:{"Content-type":"application/json; charset=UTF-8"}}).then(response=>response.json()).then(data=>{console.log(data),1==data.status?location.href="/admin/exp_admin_panel/dashboard":$("#msg").text(" * "+data.msg)})}function prepareContent(srcArray){var dwnloadData='<p class="txtStyle">Download Content</p>';if(null!=srcArray&&srcArray.length>0&&1==srcArray.length){var fileArray=JSON.parse(srcArray[0].BM_FileUrl);if(null!=fileArray&&fileArray.length>0&&1==fileArray.length){var src="";(src=base_url+"adm/store/"+fileArray[0]).includes(".mp3")?(dwnloadData+='<audio controls="" autoplay="" name="media" style="width: 100%;">',dwnloadData+='<source id="data_id" src="'+src+'" type="audio/mpeg">',dwnloadData+="</audio>"):src.includes(".mp4")?(dwnloadData+='<video controls="" autoplay="" name="media" style="width: 100%;">',dwnloadData+='<source id="data_id" src="'+src+'" type="video/mp4">',dwnloadData+="</video>"):(src.includes(".jpeg")||src.includes(".jpg")||src.includes(".png"))&&(dwnloadData+='<img id="data_id" src="'+src+'" style="width: 100%;">')}else{var src="";for(let i=0;i<fileArray.length;i++)dwnloadData+='<img id="data_id" src="'+(src=base_url+fileArray[0])+'" style="width: 100%;"></br>'}}$("#verify_div").html(""),$("#dwnld_div").html(dwnloadData)}function doVerify(id){let isChecked=$("#chk_"+id).prop("checked");console.log(isChecked);let JM_Verified=0;isChecked&&(JM_Verified=1);const JSONdata={JM_ID:id,JM_Verified:JM_Verified};let srcArray=[];const API_url=base_url+"admin/verifycelebrity";fetch(API_url,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(JSONdata)}).then(response=>response.json()).then(data=>{let msg="";1===data.status?(msg="<strong>Success !</strong>"+data.msg,$("#alertcustom").css("display","block"),$("#alertcustom").html(msg),hideAlert("alertcustom")):(msg="<strong>Success !</strong>"+data.msg,$("#alertcustom").css("display","block"),$("#alertcustom").text(msg),hideAlert("alertcustom"))})}function hideAlert(id){setTimeout((function(){$("#"+id).css("display","none")}),2e3)}function openModal(id){$("#JM_ID").val(id)}function CreateTable_OrderBy(tableName,col){try{var isDataTable=$.fn.DataTable.isDataTable("#"+tableName);table=$("#"+tableName).DataTable({destroy:!0,order:[[col,"desc"]],iDisplayLength:100})}catch(e){}}if($("#btn_add").on("click",(function(){event.preventDefault(),$("#Add_user_div").show()})),$("#btn_cancel").on("click",(function(){event.preventDefault(),$("#Add_user_div").hide()})),$("#btn_insert_user").on("click",(function(){event.preventDefault(),$("#Add_user_div").hide(),Insert_user()})),$("#btn_cancel").on("click",(function(){$("#btn_add").show()})),$("#btn_add").on("click",(function(){$("#btn_insert_user").show(),$("#btn_update").hide()})),$("#btn_update").on("click",(function(){var username=$("#username").val(),email=$("#email").val(),password=$("#password").val();return""==username?(doAlert("Empty Field","User Name Can't be blank"),!1):""==email?(doAlert("Empty Field","Email Can't be blank"),!1):""==password?(doAlert("Empty Field","Password Can't be blank"),!1):void UpdateUser()})),OkCancel=0,$("#submit").on("click",(function(){event.preventDefault(),$("#msg").text("");let email=$("#email").val(),password=$("#password").val();if(0==email.length)return $("#msg").text(" * email is empty"),!1;if(!email.includes(".")||!email.includes("@"))return $("#msg").text(" * email is invalid"),!1;if(0==password.length)return $("#msg").text(" * password is empty"),!1;const jsonData={AM_Email:email,AM_Password:password};JsonPostData("admin/auth",jsonData)})),$("#btn_verify").on("click",(function(){event.preventDefault(),$("#msg").text("");let password=$("#BM_Password").val(),BM_Url_ID=$("#BM_Url_ID").val();if(0==password.length)return $("#msg").text(" * password is empty"),!1;const JSONdata={BM_Url_ID:BM_Url_ID,BM_Password:password};let srcArray=[];const API_url=base_url+"admin/validateDecrypt";fetch(API_url,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(JSONdata)}).then(response=>response.json()).then(data=>{1===data.status?(srcArray=data.srcArray,console.log(srcArray),prepareContent(srcArray)):$("#msg").text(data.msg)})})),$(document).on("click",".editProfile",(function(){try{var JM_Email=$(this).attr("data-value");if(JM_Email.length>0){let inserted_id=0,API_url;var JSONdata={JM_Email:JM_Email};fetch(base_url+"admin/userProfile",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(JSONdata)}).then((function(response){return response.json()})).then(data=>{if(1!==data.status)return document.getElementById("msg").innerHTML=data.msg,!1;var userDetails=data.userDetails;if(null!=userDetails&&userDetails.length>0){console.log(data.msg),localStorage.setItem("JM_ID",data.JM_ID),localStorage.setItem("JM_User_Profile_Url",data.userDetails[0].JM_User_Profile_Url),localStorage.setItem("JM_Email",JM_Email),localStorage.setItem("userDetails",JSON.stringify(userDetails)),localStorage.setItem("directAccess",JSON.stringify(data.directAccess)),localStorage.setItem("linkMaster",JSON.stringify(data.linkMaster)),localStorage.setItem("auth",data.token);var minutes=60,dt=new Date,FromNewTime=new Date,ToNewTime=new Date(dt.getTime()+36e5);console.log(FromNewTime),console.log(ToNewTime),localStorage.setItem("FromNewTime",FromNewTime),localStorage.setItem("ToNewTime",ToNewTime),localStorage.setItem("keepLogin",0),window.open(base_url+"me","_blank")}})}}catch(e){alert("connection error")}})),$(document).on("click",".block",(function(){try{var JM_ID=parseInt($(this).val());let isBlocked=0,isChecked;if($(this).prop("checked")&&(isBlocked=1),JM_ID>0){let inserted_id=0,API_url;var JSONdata={JM_ID:JM_ID,isBlocked:isBlocked};fetch(base_url+"admin/blockCelebrity",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(JSONdata)}).then((function(response){return response.json()})).then(data=>{let msg="";1===data.status?(msg="<strong> Success! </strong> "+data.msg,$("#alertcustom").css("display","block"),$("#alertcustom").html(msg),hideAlert("alertcustom")):(msg="<strong>Success !</strong>"+data.msg,$("#alertcustom").css("display","block"),$("#alertcustom").text(msg),hideAlert("alertcustom"))})}}catch(e){alert("connection error")}})),$(document).on("click",".delete",(function(){try{var JM_ID=parseInt($("#JM_ID").val());let isDeleted=1;if(JM_ID>0){let inserted_id=0,API_url;var JSONdata={JM_ID:JM_ID,isDeleted:isDeleted};fetch(base_url+"admin/deleteCelebrity",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(JSONdata)}).then((function(response){return response.json()})).then(data=>{let msg="";1===data.status?(msg="<strong> Success! </strong> "+data.msg,$("#alertcustom").css("display","block"),$("#alertcustom").html(msg),hideAlert("alertcustom"),window.location.reload(!0)):(msg="<strong>Success !</strong>"+data.msg,$("#alertcustom").css("display","block"),$("#alertcustom").text(msg),hideAlert("alertcustom"))})}}catch(e){alert("connection error")}})),$("#password").keyup((function(event){13==event.keyCode&&$("#submit").click()})),$(document).on("click",".sendCode",(function(){var Code=$(this).attr("data-value"),Email=$(this).attr("data-email");if(Code.length>0&&Email.length>0){let API_url;var JSONdata={Code:Code,Email:Email};fetch(base_url+"admin/sendReferralCode",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(JSONdata)}).then((function(response){return response.json()})).then(data=>{let msg="";1===data.status?(msg="<strong> Success! </strong> "+data.msg,$("#alertcustom").css("display","block"),$("#alertcustom").html(msg),hideAlert("alertcustom"),$(this).hide()):(msg="<strong>Success !</strong>"+data.msg,$("#alertcustom").css("display","block"),$("#alertcustom").text(msg),hideAlert("alertcustom"))})}})),url.endsWith("/celebrity")&&($("#tbl_celebrity").dataTable({columnDefs:[{width:"20%",targets:0}]}),CreateTable_OrderBy("tbl_celebrity",4)),url.endsWith("/purchaseMade")&&($("#tbl_purchase").dataTable(),CreateTable_OrderBy("tbl_purchase",8)),url.endsWith("/referralRequest")&&($("#tbl_referral").dataTable(),CreateTable_OrderBy("tbl_referral",1)),url.endsWith("/newsletter")&&($("#tbl_news_letter").dataTable(),CreateTable_OrderBy("tbl_news_letter",0)),url.endsWith("/discarded-premium-features")&&($("#tbl_discarded").dataTable(),CreateTable_OrderBy("tbl_discarded",0)),$(document).on("click",".pay",(function(){var BM_ID=parseInt($(this).attr("data-value"));if(BM_ID>0){let API_url;var JSONdata={BM_ID:BM_ID};fetch(base_url+"admin/doPaidCompletedRequest",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(JSONdata)}).then((function(response){return response.json()})).then(data=>{let msg="";1===data.status?(msg="<strong> Success! </strong> "+data.msg,$("#alertcustom").css("display","block"),$("#alertcustom").html(msg),hideAlert("alertcustom"),$(this).text("Paid"),$(this).attr("disabled",!0)):(msg="<strong>Success !</strong>"+data.msg,$("#alertcustom").css("display","block"),$("#alertcustom").text(msg),hideAlert("alertcustom"))})}})),$(document).on("click",".priority",(function(){try{var JM_ID=parseInt($(this).val());let displayLanding=0,isChecked;if($(this).prop("checked")&&(displayLanding=1),JM_ID>0){let inserted_id=0,API_url;var JSONdata={JM_ID:JM_ID,displayLanding:displayLanding};fetch(base_url+"admin/updateCelebrityPrority",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(JSONdata)}).then((function(response){return response.json()})).then(data=>{let msg="";1===data.status?(msg="<strong> Success! </strong> "+data.msg,$("#alertcustom").css("display","block"),$("#alertcustom").html(msg),hideAlert("alertcustom"),window.location.reload(!0)):(msg="Success ! "+data.msg,$(this).prop("checked",!1),$("#alertcustom").css("display","block"),$("#alertcustom").text(msg),hideAlert("alertcustom"))})}}catch(e){alert("connection error")}})),$(document).on("click","#btn_update_pass",(function(){var current_pass=$("#pwd").val(),new_pass=$("#new_pwd").val();if(0==current_pass.length)return $("err").text("Enter Current Password"),!1;if(0==new_pass.length)return $("#err").text("Enter New Password"),!1;if(current_pass==new_pass)return $("#err").text("Current Password and  New Password are same"),!1;{let API_url;var JSONdata={current_pass:current_pass,new_pass:new_pass};fetch(base_url+"admin/doUpdateAdminPassword",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(JSONdata)}).then((function(response){return response.json()})).then(data=>{let msg="";$("#err").text(data.msg)})}})),$(document).on("click",".changeUrl",(function(){try{var JM_ID=parseInt($(this).attr("data-value")),old_url=$(this).attr("data-old"),new_url=$(this).attr("data-new");if(JM_ID>0){let inserted_id=0,API_url;var JSONdata={JM_ID:JM_ID,old_url:old_url,new_url:new_url};fetch(base_url+"admin/changeUrlByAdmin",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(JSONdata)}).then((function(response){return response.json()})).then(data=>{let msg="";1===data.status?(msg="<strong> Success! </strong> "+data.msg,$("#alertcustom").css("display","block"),$("#alertcustom").html(msg),hideAlert("alertcustom"),window.location.reload(!0)):(msg="info! "+data.msg,$("#alertcustom").css("display","block"),$("#alertcustom").text(msg),hideAlert("alertcustom"))})}}catch(e){alert("connection error")}})),url.endsWith("/create-discount")){$("#tbl_discount").dataTable(),CreateTable_OrderBy("tbl_discount",0);var maxDate=getMaxDate();$("#DM_DeadLine_Date").attr("min",maxDate),$("#date_deadline").attr("min",maxDate)}function getMaxDate(){var dtToday=new Date,month=dtToday.getMonth()+1,day=dtToday.getDate(),year=dtToday.getFullYear(),maxDate;return month<10&&(month="0"+month.toString()),day<10&&(day="0"+day.toString()),year+"-"+month+"-"+day}async function JsonAPI(apiName,JSONdata){let API_url=base_url+"admin/"+apiName,response=await fetch(API_url,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(JSONdata)});const data=await response.json();return console.log(data),data}function decryptJson(flag){var bytes=CryptoJS.AES.decrypt(flag,"ae25e95570a100bc69d3b44fe1124773"),decryptedData;return JSON.parse(bytes.toString(CryptoJS.enc.Utf8))}function encryptJson(data){var ciphertext;return CryptoJS.AES.encrypt(JSON.stringify(data),"ae25e95570a100bc69d3b44fe1124773").toString()}$("#DM_type").val("A"),$("#rdo_amt").on("click",(function(){let isChecked;$(this).prop("checked")?($("#lbl_amt_per").html("Amount"),$("#DM_type").val("A")):($("#lbl_amt_per").html("Percentage"),$("#DM_type").val("P"))})),$("#rdo_per").on("click",(function(){let isChecked;$(this).prop("checked")?($("#lbl_amt_per").html("Percentage"),$("#DM_type").val("P")):($("#lbl_amt_per").html("Amount"),$("#DM_type").val("A"))})),$(".tab_quota").on("click",(function(){$("#DM_type").val("Q")})),$(".tab_deadline").on("click",(function(){$("#DM_type").val("D")})),$(document).on("click",".Create_Code_amt_per",(function(event){event.preventDefault();let DM_Code=$("#DM_Code").val(),DM_type=$("#DM_type").val(),DM_Amount_Percent=parseFloat($("#DM_Amount_Percent").val()),API_url;if(0==DM_Code.length)return $("#DM_Code").css("border-bottom","1px solid #d01b0d"),$("#DM_Code").css("box-shadow","0 1px 0 0 #d01b0d"),msg="<strong> Error! </strong> Empty field ",$("#alertcustom").css("display","block"),$("#alertcustom").html(msg),hideAlert("alertcustom"),!1;if(0==DM_Amount_Percent)return $("#DM_Amount_Percent").css("border-bottom","1px solid #d01b0d"),$("#DM_Amount_Percent").css("box-shadow","0 1px 0 0 #d01b0d"),msg="<strong> Error! </strong> Empty field ",$("#alertcustom").css("display","block"),$("#alertcustom").html(msg),hideAlert("alertcustom"),!1;var JSONdata={DM_Code:DM_Code,DM_type:DM_type,DM_Amount_Percent:DM_Amount_Percent};fetch(base_url+"admin/insertCode",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(JSONdata)}).then((function(response){return response.json()})).then(data=>{let msg="";1===data.status?(msg="<strong> Success! </strong> "+data.msg,$("#alertcustom").css("display","block"),$("#alertcustom").html(msg),hideAlert("alertcustom"),window.location.reload(!0)):(msg="info! "+data.msg,$("#alertcustom").css("display","block"),$("#alertcustom").text(msg),hideAlert("alertcustom"))})})),$(document).on("click",".Create_Code_quota",(function(event){event.preventDefault();let DM_Code=$("#DM_Code").val(),DM_type="Q",DM_Amount_Percent=parseFloat($("#quota_amt").val()),DM_Uses_Times=parseFloat($("#DM_Uses_Times").val()),API_url;if(isNaN(DM_Amount_Percent)&&(DM_Amount_Percent=0),isNaN(DM_Uses_Times)&&(DM_Uses_Times=0),0==DM_Code.length)return $("#DM_Code").css("border-bottom","1px solid #d01b0d"),$("#DM_Code").css("box-shadow","0 1px 0 0 #d01b0d"),msg="<strong> Error! </strong> Empty Code ",$("#alertcustom").css("display","block"),$("#alertcustom").html(msg),hideAlert("alertcustom"),!1;if($("#quota_amt").css("border-bottom","1px solid #9e9e9e"),$("#quota_amt").css("box-shadow","none"),0==DM_Amount_Percent)return $("#quota_amt").css("border-bottom","1px solid #d01b0d"),$("#quota_amt").css("box-shadow","0 1px 0 0 #d01b0d"),msg="<strong> Error! </strong> Empty Amount ",$("#alertcustom").css("display","block"),$("#alertcustom").html(msg),hideAlert("alertcustom"),!1;if($("#DM_Uses_Times").css("border-bottom","1px solid #9e9e9e"),$("#DM_Uses_Times").css("box-shadow","none"),0==DM_Uses_Times)return $("#DM_Uses_Times").css("border-bottom","1px solid #d01b0d"),$("#DM_Uses_Times").css("box-shadow","0 1px 0 0 #d01b0d"),msg="<strong> Error! </strong> Empty No Of Quota ",$("#alertcustom").css("display","block"),$("#alertcustom").html(msg),hideAlert("alertcustom"),!1;var JSONdata={DM_Code:DM_Code,DM_type:"Q",DM_Amount_Percent:DM_Amount_Percent,DM_Uses_Times:DM_Uses_Times};fetch(base_url+"admin/insertCode",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(JSONdata)}).then((function(response){return response.json()})).then(data=>{let msg="";1===data.status?(msg="<strong> Success! </strong> "+data.msg,$("#alertcustom").css("display","block"),$("#alertcustom").html(msg),hideAlert("alertcustom"),window.location.reload(!0)):(msg="info! "+data.msg,$("#alertcustom").css("display","block"),$("#alertcustom").text(msg),hideAlert("alertcustom"))})})),$(document).on("click",".Create_Code_deadline",(function(event){event.preventDefault();let DM_Code=$("#DM_Code").val(),DM_type="D",DM_Amount_Percent=parseFloat($("#dead_amt").val()),DM_DeadLine_Date=$("#DM_DeadLine_Date").val(),API_url;if(isNaN(DM_Amount_Percent)&&(DM_Amount_Percent=0),0==DM_Code.length)return $("#DM_Code").css("border-bottom","1px solid #d01b0d"),$("#DM_Code").css("box-shadow","0 1px 0 0 #d01b0d"),msg="<strong> Error! </strong> Empty Code ",$("#alertcustom").css("display","block"),$("#alertcustom").html(msg),hideAlert("alertcustom"),!1;if($("#dead_amt").css("border-bottom","1px solid #9e9e9e"),$("#dead_amt").css("box-shadow","none"),0==DM_Amount_Percent)return $("#dead_amt").css("border-bottom","1px solid #d01b0d"),$("#dead_amt").css("box-shadow","0 1px 0 0 #d01b0d"),msg="<strong> Error! </strong> Empty Amount ",$("#alertcustom").css("display","block"),$("#alertcustom").html(msg),hideAlert("alertcustom"),!1;if($("#DM_DeadLine_Date").css("border-bottom","1px solid #9e9e9e"),$("#DM_DeadLine_Date").css("box-shadow","none"),""==DM_DeadLine_Date)return $("#DM_DeadLine_Date").css("border-bottom","1px solid #d01b0d"),$("#DM_DeadLine_Date").css("box-shadow","0 1px 0 0 #d01b0d"),msg="<strong> Error! </strong> Empty Deadline ",$("#alertcustom").css("display","block"),$("#alertcustom").html(msg),hideAlert("alertcustom"),!1;var JSONdata={DM_Code:DM_Code,DM_type:"D",DM_Amount_Percent:DM_Amount_Percent,DM_DeadLine_Date:DM_DeadLine_Date};fetch(base_url+"admin/insertCode",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(JSONdata)}).then((function(response){return response.json()})).then(data=>{let msg="";1===data.status?(msg="<strong> Success! </strong> "+data.msg,$("#alertcustom").css("display","block"),$("#alertcustom").html(msg),hideAlert("alertcustom"),window.location.reload(!0)):(msg="info! "+data.msg,$("#alertcustom").css("display","block"),$("#alertcustom").text(msg),hideAlert("alertcustom"))})})),$(document).on("click",".editCode",(function(event){event.preventDefault();var $this,data=$(this).attr("data-value"),jsonData=JSON.parse(data);if(console.log(jsonData),$(".code").val(jsonData.DM_Code),$("#DM_ID").val(jsonData.DM_ID),"A"==jsonData.DM_Type||"P"==jsonData.DM_Type){let title="A"==jsonData.DM_Type?"Update Amount Of Discount":"P"==jsonData.DM_Type?"Update Percentage Of Discount":"",lbl="A"==jsonData.DM_Type?"Amount":"P"==jsonData.DM_Type?"Percentage":"";$("#title_A_P").text(title),$("#lbl_A_P").text(lbl),$("#amt_per").val(jsonData.DM_Amount_Percent)}else"Q"==jsonData.DM_Type?($("#amt_quota_edit").val(jsonData.DM_Amount_Percent),$("#DM_Uses_Times_edit").val(jsonData.DM_Uses_Times)):($("#amt_deadline").val(jsonData.DM_Amount_Percent),$("#date_deadline").val(jsonData.DM_DeadLine_Date))})),$(document).on("click","#btn_update_code_A_P",(async function(event){event.preventDefault();let DM_Amount_Percent=parseFloat($("#amt_per").val()),DM_ID=parseFloat($("#DM_ID").val());if(0==DM_Amount_Percent)return $("#amt_per").css("border-bottom","1px solid #d01b0d"),$("#amt_per").css("box-shadow","0 1px 0 0 #d01b0d"),msg="<strong> Error! </strong> Empty field ",$("#alertcustom").css("display","block"),$("#alertcustom").html(msg),hideAlert("alertcustom"),!1;var DM_Type="A",JSONdata={DM_Type:"A",DM_ID:DM_ID,DM_Amount_Percent:DM_Amount_Percent},data=await JsonAPI("updateCode",JSONdata);let msg="";1===data.status?(msg="<strong> Success! </strong> "+data.msg,$("#alertcustom").css("display","block"),$("#alertcustom").html(msg),hideAlert("alertcustom"),window.location.reload(!0)):(msg="info! "+data.msg,$("#alertcustom").css("display","block"),$("#alertcustom").text(msg),hideAlert("alertcustom"))})),$(document).on("click","#btn_update_code_quota",(async function(event){event.preventDefault();let DM_Amount_Percent=parseFloat($("#amt_quota_edit").val()),DM_ID=parseFloat($("#DM_ID").val()),DM_Uses_Times=parseFloat($("#DM_Uses_Times_edit").val());if($("#amt_quota_edit").css("border-bottom","1px solid #9e9e9e"),$("#amt_quota_edit").css("box-shadow","none"),0==DM_Amount_Percent)return $("#amt_quota_edit").css("border-bottom","1px solid #d01b0d"),$("#amt_quota_edit").css("box-shadow","0 1px 0 0 #d01b0d"),msg="<strong> Error! </strong> Empty field ",$("#alertcustom").css("display","block"),$("#alertcustom").html(msg),hideAlert("alertcustom"),!1;if($("#DM_Uses_Times_edit").css("border-bottom","1px solid #9e9e9e"),$("#DM_Uses_Times_edit").css("box-shadow","none"),0==DM_Uses_Times)return $("#DM_Uses_Times_edit").css("border-bottom","1px solid #d01b0d"),$("#DM_Uses_Times_edit").css("box-shadow","0 1px 0 0 #d01b0d"),msg="<strong> Error! </strong> Empty No Of Quota ",$("#alertcustom").css("display","block"),$("#alertcustom").html(msg),hideAlert("alertcustom"),!1;var JSONdata={DM_Type:"Q",DM_ID:DM_ID,DM_Amount_Percent:DM_Amount_Percent,DM_Uses_Times:DM_Uses_Times},data=await JsonAPI("updateCode",JSONdata);let msg="";1===data.status?(msg="<strong> Success! </strong> "+data.msg,$("#alertcustom").css("display","block"),$("#alertcustom").html(msg),hideAlert("alertcustom"),window.location.reload(!0)):(msg="info! "+data.msg,$("#alertcustom").css("display","block"),$("#alertcustom").text(msg),hideAlert("alertcustom"))})),$(document).on("click",".Create_Code_deadline_quota",(function(event){event.preventDefault();let DM_Code=$("#DM_Code").val(),DM_type=$("#DM_type").val(),DM_Amount_Percent=parseFloat($("#dead_quota_amt").val()),DM_DeadLine_Date=$("#DM_DeadLine_Date_quota").val(),DM_Uses_Times=parseFloat($("#DM_Uses_Times_dead_quota").val()),API_url;if(isNaN(DM_Amount_Percent)&&(DM_Amount_Percent=0),isNaN(DM_Uses_Times)&&(DM_Uses_Times=0),0==DM_Code.length)return $("#DM_Code").css("border-bottom","1px solid #d01b0d"),$("#DM_Code").css("box-shadow","0 1px 0 0 #d01b0d"),msg="<strong> Error! </strong> Empty Code ",$("#alertcustom").css("display","block"),$("#alertcustom").html(msg),hideAlert("alertcustom"),!1;if($("#dead_quota_amt").css("border-bottom","1px solid #9e9e9e"),$("#dead_quota_amt").css("box-shadow","none"),0==DM_Amount_Percent)return $("#dead_amt").css("border-bottom","1px solid #d01b0d"),$("#dead_amt").css("box-shadow","0 1px 0 0 #d01b0d"),msg="<strong> Error! </strong> Empty Amount ",$("#alertcustom").css("display","block"),$("#alertcustom").html(msg),hideAlert("alertcustom"),!1;""==DM_DeadLine_Date&&0==DM_Uses_Times?DM_type="A":""==DM_DeadLine_Date&&DM_Uses_Times>0?DM_type="Q":0==DM_Uses_Times&&""!=DM_DeadLine_Date?DM_type="D":DM_Uses_Times>0&&""!=DM_DeadLine_Date&&(DM_type="QD");var JSONdata={DM_Code:DM_Code,DM_type:DM_type,DM_Amount_Percent:DM_Amount_Percent,DM_DeadLine_Date:DM_DeadLine_Date,DM_Uses_Times:DM_Uses_Times};fetch(base_url+"admin/insertCode",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(JSONdata)}).then((function(response){return response.json()})).then(data=>{let msg="";1===data.status?(msg="<strong> Success! </strong> "+data.msg,$("#alertcustom").css("display","block"),$("#alertcustom").html(msg),hideAlert("alertcustom"),window.location.reload(!0)):(msg="info! "+data.msg,$("#alertcustom").css("display","block"),$("#alertcustom").text(msg),hideAlert("alertcustom"))})})),$(document).on("click","#btn_update_code_deadLine_quota",(async function(event){event.preventDefault();let DM_Code=$("#DM_Code").val(),DM_type=$("#DM_type").val(),DM_Amount_Percent=parseFloat($("#dead_quota_amt_edit").val()),DM_DeadLine_Date=$("#DM_DeadLine_Date_quota_edit").val(),DM_Uses_Times=parseFloat($("#DM_Uses_Times_dead_quota_edit").val()),DM_ID=parseFloat($("#DM_ID").val()),msg="";if(isNaN(DM_Amount_Percent)&&(DM_Amount_Percent=0),isNaN(DM_Uses_Times)&&(DM_Uses_Times=0),0==DM_Code.length)return $("#DM_Code").css("border-bottom","1px solid #d01b0d"),$("#DM_Code").css("box-shadow","0 1px 0 0 #d01b0d"),msg="<strong> Error! </strong> Empty Code ",$("#alertcustom").css("display","block"),$("#alertcustom").html(msg),hideAlert("alertcustom"),!1;if($("#dead_quota_amt").css("border-bottom","1px solid #9e9e9e"),$("#dead_quota_amt").css("box-shadow","none"),0==DM_Amount_Percent)return $("#dead_amt").css("border-bottom","1px solid #d01b0d"),$("#dead_amt").css("box-shadow","0 1px 0 0 #d01b0d"),msg="<strong> Error! </strong> Empty Amount ",$("#alertcustom").css("display","block"),$("#alertcustom").html(msg),hideAlert("alertcustom"),!1;""==DM_DeadLine_Date&&0==DM_Uses_Times?DM_type="A":""==DM_DeadLine_Date&&DM_Uses_Times>0?DM_type="Q":0==DM_Uses_Times&&""!=DM_DeadLine_Date?DM_type="D":DM_Uses_Times>0&&""!=DM_DeadLine_Date&&(DM_type="QD");let API_url=base_url+"admin/updateCode";var JSONdata={DM_ID:DM_ID,DM_Type:DM_type,DM_Amount_Percent:DM_Amount_Percent,DM_DeadLine_Date:DM_DeadLine_Date,DM_Uses_Times:DM_Uses_Times},data=await JsonAPI("updateCode",JSONdata);1===data.status?(msg="<strong> Success! </strong> "+data.msg,$("#alertcustom").css("display","block"),$("#alertcustom").html(msg),hideAlert("alertcustom"),window.location.reload(!0)):(msg="info! "+data.msg,$("#alertcustom").css("display","block"),$("#alertcustom").text(msg),hideAlert("alertcustom"))})),$(document).on("click","#btn_update_code_deadLine",(async function(event){event.preventDefault();let DM_Amount_Percent=parseFloat($("#amt_deadline").val()),DM_ID=parseFloat($("#DM_ID").val()),DM_DeadLine_Date=$("#date_deadline").val();if($("#amt_deadline").css("border-bottom","1px solid #9e9e9e"),$("#amt_deadline").css("box-shadow","none"),0==DM_Amount_Percent)return $("#amt_quota_edit").css("border-bottom","1px solid #d01b0d"),$("#amt_quota_edit").css("box-shadow","0 1px 0 0 #d01b0d"),msg="<strong> Error! </strong> Empty field ",$("#alertcustom").css("display","block"),$("#alertcustom").html(msg),hideAlert("alertcustom"),!1;if($("#date_deadline").css("border-bottom","1px solid #d01b0d"),$("#date_deadline").css("box-shadow","none"),0==DM_DeadLine_Date.length)return $("#DM_Uses_Times_edit").css("border-bottom","1px solid #d01b0d"),$("#DM_Uses_Times_edit").css("box-shadow","0 1px 0 0 #d01b0d"),msg="<strong> Error! </strong> Empty No Of Quota ",$("#alertcustom").css("display","block"),$("#alertcustom").html(msg),hideAlert("alertcustom"),!1;var JSONdata={DM_Type:"D",DM_ID:DM_ID,DM_Amount_Percent:DM_Amount_Percent,DM_DeadLine_Date:DM_DeadLine_Date},data=await JsonAPI("updateCode",JSONdata);let msg="";1===data.status?(msg="<strong> Success! </strong> "+data.msg,$("#alertcustom").css("display","block"),$("#alertcustom").html(msg),hideAlert("alertcustom"),window.location.reload(!0)):(msg="info! "+data.msg,$("#alertcustom").css("display","block"),$("#alertcustom").text(msg),hideAlert("alertcustom"))})),$(document).on("click",".deleteCode",(async function(event){var DM_ID=parseInt($(this).attr("data-value"));isNaN(DM_ID)&&(DM_ID=0);var JSONdata={DM_ID:DM_ID},data=await JsonAPI("deleteCode",JSONdata);let msg="";1===data.status?(msg="<strong> Success! </strong> "+data.msg,$("#alertcustom").css("display","block"),$("#alertcustom").html(msg),hideAlert("alertcustom"),window.location.reload(!0)):(msg="info! "+data.msg,$("#alertcustom").css("display","block"),$("#alertcustom").text(msg),hideAlert("alertcustom"))})),$(document).on("click",".news_letter",(async function(){try{var JM_ID=parseInt($(this).val());let isBlocked=0,isChecked;if($(this).prop("checked")&&(isBlocked=1),JM_ID>0){let inserted_id=0,API_url=base_url+"admin/isSentNewsLater";var flagData={ID:JM_ID,isSentNewsLater:isBlocked};const flag=await encryptJson(flagData);console.log(flag);var JSONdata={flag:flag};fetch(API_url,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(JSONdata)}).then((function(response){return response.json()})).then(data=>{let msg="";1===data.status?(msg="<strong> Success! </strong> "+data.msg,$("#alertcustom").css("display","block"),$("#alertcustom").html(msg),hideAlert("alertcustom"),setTimeout((function(){window.location.reload()}),2e3)):(msg="<strong>Success !</strong>"+data.msg,$("#alertcustom").css("display","block"),$("#alertcustom").text(msg),hideAlert("alertcustom"))})}}catch(e){alert("connection error")}}));